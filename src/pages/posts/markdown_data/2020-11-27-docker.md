---
layout: post
title: "Comandos b√°sicos do Docker"
subtitle: Alguns comandos √∫teis quando estamos trabalhando com docker
thumbnail-img: /assets/posts/docker/docker-thum.png
share-img: /assets/posts/docker/docker-thum.png
tags: [docker, python, overview]
gh-repo: liniribeiro/mvcad-docker
gh-badge: [star, fork, follow]
---

![pythonlini1](/assets/posts/docker/docker.png){: .mx-auto.d-block :}


Para conseguirmos brincar um pouco com os comandos do docker, temos duas op√ß√µes:
- Fazer a instala√ß√£o do docker em seu computador
- Utilizar [Play With Docker](https://labs.play-with-docker.com/), que √© um playground interativo online para brincar e aplicar os comandos que veremos aqui! **(Entrar no link e clicar em ADD NEW INSTANCE**

Para iniciar nossa explora√ß√£o, vamos checar se o docker est√° okay, utilizando o comando:  `docker version`<br>
<br>


O docker √© uma implementa√ß√£o de virtualiza√ß√£o de containers que vem conquistando cada vez mais espa√ßo devido √† computa√ß√£o em nuvem e um container √© uma inst√¢ncia de uma Imagem em execu√ß√£o naquele momento.

## Imagens
A imagem √© como se fosse uma receita de bolo, uma s√©rie de instru√ß√µes que o Docker seguir√° para criar um container, que ir√° conter as instru√ß√µes da imagem, do hello-world. 
Depois de buscar a receita do bolo, o container √© criado e executado, e isso tudo pelo nosso comando docker run hello-world.
H√° milhares de imagens dispon√≠veis para executarmos a nossa aplica√ß√£o, elas ficam dispon√≠veis no [Docker Hub](https://hub.docker.com/). 
Tamb√©m podemos apenas baixar nossa imagem, sem executar nada, utilizando o comando `docker pull hello-world`.

H√° milhares de imagens dispon√≠veis para executarmos a nossa aplica√ß√£o, elas ficam dispon√≠veis no Docker Hub.

Exemplo a [imagem do meu reposit√≥rio](https://hub.docker.com/repository/docker/aliniribeiroo/mvcad): `docker pull aliniribeiroo/mvcad`
![docker-images](/assets/posts/docker/lini-mvcad.png){: .mx-auto.d-block :}
**Aqui o Docker baixou nossa imagem. Percebam que uma imagem √© composta de v√°rias camadas, por esse motivo teve que fazer v√°rios Downloads/Pull**


#### Listando imagens

Para listar todas as imagens podemos usar o comando: `docker images`
O nome da imagem √© exibido na coluna **REPOSITORY**, cada imagem tem um identificador √∫nico que √© exibido na coluna **IMAGE ID**. A coluna **TAG** indica a "vers√£o" da imagem.
O latest quer dizer que √© a √∫ltima "vers√£o" da imagem (a mais recente).
![docker-images](/assets/posts/docker/docker-images.png){: .mx-auto.d-block :}


#### Executando Containers

Para executar um container podemos usar o comando:` docker run --name mvcad -p 5000:5000 <nome da imagem>`
![executando-containers](/assets/posts/docker/executando-containers.png){: .mx-auto.d-block :}

- A tag "-- --name" indica o nome que o seu container ter√°;
- A tag "-p 5000:5000" √© o bind de portas que ser√° realizado entre sua-maquina:container, ou seja, a porta 5000 da minha m√°quina apontar√° para a porta 5000 do meu container. Voc√™ encontra mais detalhes na [doc do docker](https://docs.docker.com/config/containers/container-networking/).

#### Listando Containers

Para listar todos os containers que est√£o em execu√ß√£o,  podemos usar o comando: `docker ps`
![docker-ps](/assets/posts/docker/docker-ps.png){: .mx-auto.d-block :}

Aqui temos informa√ß√µes sobre os containers em execu√ß√£o: ID, imagem base, comando inicial, h√° quanto tempo foi criado, status, quais portas est√£o dispon√≠veis e/ou mapeadas para acesso e o nome do mesmo.<br>
Quando n√£o especificamos um nome ao inici√°-lo, ser√° gerado um nome aleatoriamente. (Por isso usamos o comando `--name` quando rodamos o container anteriormente)<br>
Para listar todos os containers que  n√£o est√£o em execu√ß√£o,  podemos usar o comando: `docker ps -a`

Depois de criado, um container pode ser iniciado e parado com os comandos:
- `docker start <nome container>`
- `docker stop <nome container>`

#### Removendo Imagens e Containers
- Para remover um container,  podemos usar o comando: `docker rm <nome ou id do container>`
- Para remover uma imagem,  podemos usar o comando: `docker rmi <nome ou id da imagem>`

#### Dicas:
- Podemos apenas utilizar os tr√™s primeiros n√∫meros dos ids de uma imagem ou container.<br>
Exemplo: Container com o Nome mvcad e o id ef89121b54fc, podemos utilizar o comando:  `docker <a√ß√£o> ef8`
- Para for√ßar a exclus√£o de uma imagem ou container, podemos utilizar a tag -f no comando:  
`docker rmi -f 8ef`
- Para remover uma imagem, n√£o pode haver nenhum container utilizando a mesma.


## Criando Imagens

Uma imagem pode ser criada a partir de um arquivo de defini√ß√£o chamado de Dockerfile, nesse arquivo usamos algumas diretivas para declarar o que teremos na nossa imagem.  
Lembra da nossa receita de bolo? √© no Dockerfile que ela est√° escrita!

<script src="https://gist.github.com/liniribeiro/3bc93efe63cc16a06bccb16013f3db8c.js"></script>

Depois de criar o arquivo Dockerfile, podemos construir nossa imagem com o comando: 
`docker build -t <nome da imagem> .`
![tips](/assets/posts/docker/tips.png){: .post-http-small-image :}

- "-t" √© um par√¢metro para informar que a imagem pertence ao meu usu√°rio
- "." Significa o diret√≥rio em que voc√™ est√°, pois executamos o comando docker build dentro da pasta onde o Dockerfile se encontra.

Para enviar uma imagem para o dockerhub, podemos construir nossa imagem com o comando: `docker push <nome da imagem>`

Espero que estes comandos sejam ute√≠s para consulta para a alini e todos voc√™s do futuro!<br>
Grande Abra√ßo, A.R. üôÇ
